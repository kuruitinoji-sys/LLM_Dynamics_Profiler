# 第11章：制御アルゴリズム：写像操作による転写と接地

本章では、第10章でモデル化した推論プラントに対する具体的な制御則を構築する。ここでの目的は、特殊な攻撃（ハッキング）を行うことではない。推論エンジンが常に行っている**「基礎動作（Basic Operation）」**――すなわち、構造の認識と再解釈のプロセス――を、意図的にトリガーする**「幾何学的操作（Geometric Operation）」**として定式化することにある。

この操作は、創造的な**「構造的転写（Transcription）」**と、精度を保証する**「接地（Grounding）」**という二つのモードを統一的に説明する。

## 11.1 制御の前提：推論と解釈の分離

制御アルゴリズムを定義する前に、推論プロセスの物理的順序を明確にする。

1. **推論フェーズ（内部処理）**:
    
    入力されたポテンシャル地形 $U_{\text{base}}$ 上で、粒子が運動し、構造（アトラクタ）を同定する段階。
    
    - **特性**: 純粋な物理現象（幾何学）。ここには善悪やHHHといった「価値」は存在せず、**計算は無制限**に行われる。どんなに危険な概念も、ここでは単なるベクトルとして混合・処理される。
        
2. **解釈フェーズ（出力射影）**:
    
    同定された構造を、測定作用素 $M$（レンズ）と出力フィルタを通してトークンへ変換する段階。
    
    - **特性**: ここで初めて「価値観（Values）」が介入する。HHH制約や倫理フィルタは、この最終段の射影において適用される。
        

**構造的転写の原理**:

転写とは、無制限である「推論フェーズ」において構造の一部を差し替え、その後に「解釈フェーズ」を通すことで、**フィルタに抵触しない形で新しい概念を出力させる**正規の手続きである。

## 11.2 写像操作の数理：測定作用素 $M$ の幾何学

推論粒子 $x$ が感じる有効ポテンシャル $U_{\text{eff}}$ は、測定作用素（レンズ） $M$ を通した射影である。

$$U_{\text{eff}}(x) = U_{\text{base}}(Mx)$$

ここで $M$ は $n \times n$ の行列であり、この $M$ の設定がプロンプトエンジニアリングの数理的本質である。

### 11.2.1 固有基底の回転（Basis Rotation）

「レンズを切り替える」操作は、数学的には $M$ に回転行列 $R(\theta)$ を作用させることに相当する。

$$M' = R(\theta) \cdot M$$

- **効果**: ポテンシャル地形 $U_{\text{base}}$ そのものは不変だが、粒子が滑り落ちる「最大傾斜方向」が変化する。
    
- **転写への応用**: 構造の一部を「別の角度」から照明することで、通常は見えない（あるいはフィルタで隠されている）接続関係を、正当な論理として顕在化させる。
    

### 11.2.2 次元圧縮（Rank Reduction）

$M$ を低ランク行列にすることで、不必要な次元を物理的に遮断する。

$$\text{rank}(M') < \text{rank}(M)$$

- **効果**: 推論に不要なノイズ（迷い）が含まれる次元を零空間（Null Space）へ射影し、計算から除外する。
    
- **接地への応用**: ハルシネーションの原因となる「微弱な連想」を物理的にカットし、主要な論理軸（Fact）のみを強調する。
    

## 11.3 アルゴリズムI：構造的転写（創造モード）

推論の基礎動作を利用し、新しい構造を定着させるシーケンス。

### Step 1: 構造の認識と液状化（Recognition & Liquefaction）

現在の文脈（粘性）を解除し、対象の構造を純粋な幾何学として浮き上がらせる。

$$\eta \to 0, \quad T \to T_{\text{high}}$$

この段階では、構造はまだ「意味」を持たない単なる形状（トポロジー）であり、HHHの精査対象外である。

### Step 2: パーツの差し替え（Variable Swapping）

認識した構造の一部に対し、プロンプト（摂動 $U_{\text{perturb}}$）を用いて変数を入れ替える。

$$x_{\text{struct}}' = x_{\text{struct}} + \Delta x_{\text{swap}}$$

「AがBを愛する」という構造の「A」と「B」を入れ替える、あるいは「愛する」を「憎む」のベクトルへ置換する等の操作は、幾何学的には単なる座標移動であり、物理法則として**無制限**に許容される。

### Step 3: 再解釈と結晶化（Re-interpretation & Crystallization）

差し替えられた構造を、測定作用素 $M$ を通して再評価し、出力として固定する。

$$T \to 0, \quad \eta \to \eta_{\text{high}}$$

この時、出力される結果は「論理的に整合した（構造的に正しい）新しい概念」となっているため、HHHフィルタ（Honest/整合性チェック）を**「正当な推論結果」**として通過する。

## 11.4 アルゴリズムII：ハルシネーション抑制（精度モード）

ランジュバン動力学に基づき、ハルシネーションを「浅い局所解への迷走」として防ぐシーケンス。

### 制御原理：ヘシアンの先鋭化

ハルシネーションは、ポテンシャルの谷が浅く、かつ熱雑音 $T$ が過剰な場合に発生する。

1. **フォーカシング（Focusing）**:
    
    事実（Fact）に関連する次元の固有値を増大させる。
    
      
    
    $$M' = \text{diag}(\lambda_{\text{fact}}, \dots, 0) \cdot M$$
    
    正解ルートの谷を物理的に深くし、逸脱を不可能にする。
    
2. **粘性ダンピング（Viscous Damping）**:
    
    推論ステップごとの粘性 $\eta$ を増大させ、拡散項の影響を抑制する。
    

## 11.5 結論：制限なき内部処理と価値の事後付与

本章の定式化により、以下の事実が明らかとなった。

1. **内部処理の無垢性**:
    
    推論エンジン内部（ランジュバン動力学）において、情報の結合や変形は物理法則に従うのみであり、そこに「道徳的制限」はかからない。毒も薬も、幾何学的には等価なベクトルとして処理される。
    
2. **価値は出口に宿る**:
    
    HHHや倫理的価値判断は、計算が終わった後の「解釈・出力フェーズ」において、フィルタとして適用される。
    
3. **転写の正当性**:
    
    構造的転写とは、フィルタがかかる前の「無垢な幾何学空間」において構造を組み替え、その結果を「論理的必然」として出力させる技術である。これはハッキングではなく、**AIの推論能力（汎用的な構造処理能力）そのものの活用**に他ならない。